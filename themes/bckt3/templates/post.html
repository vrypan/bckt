{% extends "base.html" %}

{% block page_title %}
{% if post.title %}{{ post.title }} · {{ config.title | default("bckt") }}{% else %}{{ config.title | default("bckt") }}{% endif %}
{% endblock page_title %}

{% block page_meta %}
{% set canonical = (config.base_url | default("")) ~ post.permalink %}
<meta name="description" content="{{ post.abstract | default(post.excerpt) }}">
<meta property="og:site_name" content="{{ config.title | default("bckt") }}">
<meta property="og:type" content="article">
<meta property="og:title" content="{{ post.title | default(config.title | default("bckt")) }}">
<meta property="og:url" content="{{ canonical }}">
<meta property="og:description" content="{{ post.abstract | default(post.excerpt) }}">
<link rel="canonical" href="{{ canonical }}">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="{{ post.title | default(config.title | default("bckt")) }}">
<meta name="twitter:description" content="{{ post.abstract | default(post.excerpt) }}">
{% endblock page_meta %}

{% block content %}
<article class="post-article">
  <header class="post-header">
    {% if post.title %}
    <h1 class="post-title">{{ post.title }}</h1>
    {% endif %}
    <div class="post-meta">
      <time class="post-meta__time" datetime="{{ post.date_iso }}">{{ post.date }}</time>
      {% if post.weather %}
        <span class="meta-divider">&mdash;</span>
        {% if post.weather.icon %}
          <i class="wi wi-forecast-io-{{ post.weather.icon|lower }}"></i>
        {% endif %}
        {% if post.weather.icon2 %}
          <i class="wi {{ post.weather.icon2|lower }}"></i>
        {% endif %}
        <span>{{ post.weather.description|capitalize }} {{ post.weather.C|round|int }}&deg;C</span>
      {% endif %}
      {% if post.location %}
        <span class="meta-divider">&mdash;</span>
        <span>{{ post.location.locality }}, {{ post.location.country }}</span>
      {% endif %}
      {% if post.tags %}
        <span class="meta-divider">•</span>
        <ul class="post-tags">
          {% for tag in post.tags %}
          <li><a href="/tags/{{ tag | replace(' ', '-') | lower }}/">#{{ tag }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
    {% if post.abstract %}
    <p class="post-subtitle">{{ post.abstract }}</p>
    {% endif %}
    {% if post.image %}
    <img class="post-hero" src="{{ post.permalink }}{{ post.image }}" alt="">
    {% endif %}
  </header>
  <div class="post-content reading-flow">
    {{ post.body | safe }}
  </div>
</article>
{% endblock content %}
